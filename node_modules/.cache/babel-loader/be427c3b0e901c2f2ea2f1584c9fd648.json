{"ast":null,"code":"import React, { useEffect } from 'react';\n/* eslint-disable no-undef */\n// flag to identify wether or not messenger chat is mounted\n\nvar isMounted = false; // added to be able to access debug mode outside component\n\nvar globalDebugModeFlag = false;\nvar MessengerChat = React.forwardRef(function (_ref, ref) {\n  var pageId = _ref.pageId,\n      _ref$language = _ref.language,\n      language = _ref$language === void 0 ? \"en_US\" : _ref$language,\n      themeColor = _ref.themeColor,\n      bottomSpacing = _ref.bottomSpacing,\n      greetingDialogDisplay = _ref.greetingDialogDisplay,\n      _ref$greetingDialogDe = _ref.greetingDialogDelay,\n      greetingDialogDelay = _ref$greetingDialogDe === void 0 ? 0 : _ref$greetingDialogDe,\n      loggedInGreeting = _ref.loggedInGreeting,\n      loggedOutGreeting = _ref.loggedOutGreeting,\n      onMessengerMounted = _ref.onMessengerMounted,\n      onMessengerLoad = _ref.onMessengerLoad,\n      onMessengerShow = _ref.onMessengerShow,\n      onMessengerHide = _ref.onMessengerHide,\n      onMessengerDialogShow = _ref.onMessengerDialogShow,\n      onMessengerDialogHide = _ref.onMessengerDialogHide,\n      _ref$debugMode = _ref.debugMode,\n      debugMode = _ref$debugMode === void 0 ? false : _ref$debugMode,\n      _ref$version = _ref.version,\n      version = _ref$version === void 0 ? \"v13.0\" : _ref$version;\n\n  var initMessenger = function initMessenger() {\n    if (debugMode) {\n      console.log(\"[react-messenger-chat-plugin] initializing messenger plugin\");\n    }\n\n    try {\n      var chatbox = document.getElementById(\"fb-customer-chat\");\n      chatbox.setAttribute(\"page_id\", pageId);\n      chatbox.setAttribute(\"attribution\", \"biz_inbox\");\n\n      if (themeColor) {\n        chatbox.setAttribute(\"theme_color\", themeColor);\n      }\n\n      if (loggedInGreeting) {\n        chatbox.setAttribute(\"logged_in_greeting\", loggedInGreeting);\n      }\n\n      if (loggedOutGreeting) {\n        chatbox.setAttribute(\"logged_out_greeting\", loggedOutGreeting);\n      }\n\n      if (greetingDialogDisplay) {\n        chatbox.setAttribute(\"greeting_dialog_display\", greetingDialogDisplay);\n      }\n\n      if (greetingDialogDelay) {\n        chatbox.setAttribute(\"greeting_dialog_delay\", greetingDialogDelay.toString());\n      }\n\n      window.fbAsyncInit = function () {\n        if (bottomSpacing != undefined) {\n          var css = \"\\n              .fb_reset {\\n                visibility: hidden !important;\\n              }\\n            \";\n          var style = document.createElement(\"style\");\n          document.head.appendChild(style);\n          style.type = \"text/css\";\n          style.appendChild(document.createTextNode(css));\n          FB.Event.subscribe(\"customerchat.load\", function () {\n            setTimeout(function () {\n              return setMessengerBottomSpacing(bottomSpacing);\n            }, 1500);\n          });\n        }\n\n        FB.init({\n          xfbml: true,\n          version: version\n        });\n        FB.Event.subscribe(\"customerchat.load\", function () {\n          // we check if not undefined, since 0 should still be a valid number\n          if (onMessengerLoad) onMessengerLoad();\n\n          if (bottomSpacing != undefined) {\n            setTimeout(function () {\n              return setMessengerBottomSpacing(bottomSpacing);\n            }, 1500);\n          }\n        });\n        FB.Event.subscribe(\"xfbml.render\", function () {\n          if (onMessengerMounted) {\n            onMessengerMounted();\n          }\n\n          isMounted = true;\n        });\n        FB.Event.subscribe(\"customerchat.show\", function () {\n          if (onMessengerShow) onMessengerShow();\n        });\n        FB.Event.subscribe(\"customerchat.hide\", function () {\n          if (onMessengerHide) onMessengerHide();\n        });\n        FB.Event.subscribe(\"customerchat.dialogShow\", function () {\n          if (onMessengerDialogShow) onMessengerDialogShow();\n        });\n        FB.Event.subscribe(\"customerchat.dialogHide\", function () {\n          if (onMessengerDialogHide) onMessengerDialogHide();\n        });\n      };\n\n      (function (d, s, id) {\n        var _a;\n\n        var js,\n            // eslint-disable-next-line prefer-const\n        fjs = d.getElementsByTagName(s)[0];\n        if (d.getElementById(id)) return; // eslint-disable-next-line prefer-const\n\n        js = d.createElement(s);\n        js.id = id;\n        js.src = \"https://connect.facebook.net/\".concat(language, \"/sdk/xfbml.customerchat.js\");\n        (_a = fjs === null || fjs === void 0 ? void 0 : fjs.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(js, fjs);\n      })(document, \"script\", \"facebook-jssdk\");\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  useEffect(function () {\n    try {\n      globalDebugModeFlag = debugMode;\n      initMessenger();\n    } catch (err) {\n      console.log(err);\n    }\n  }, []);\n  return React.createElement(\"div\", {\n    ref: ref\n  }, React.createElement(\"div\", {\n    id: \"fb-root\"\n  }), React.createElement(\"div\", {\n    id: \"fb-customer-chat\",\n    className: \"fb-customerchat\"\n  }));\n});\n\nvar setMessengerBottomSpacing = function setMessengerBottomSpacing(bottomSpacing) {\n  if (globalDebugModeFlag) {\n    console.log(\"[react-messenger-chat-plugin] setting messenger bottom spacing: \".concat(bottomSpacing));\n  }\n\n  var css = \"\\n  .fb_reset {\\n    visibility: visible !important;\\n  }\\n\\n  [data-testid=\\\"bubble_iframe\\\"] {\\n    visibility: visible !important;\\n    bottom: 0 !important;\\n    transform: translateY(\".concat(-bottomSpacing, \"px) !important;\\n    transition: transform 0.3s !important;\\n  }\\n\\n  [data-testid='dialog_iframe'] {\\n    bottom: \").concat(bottomSpacing + 56, \"px !important;\\n  }\\n  \");\n  var style = document.createElement(\"style\");\n  document.head.appendChild(style);\n  style.type = \"text/css\";\n  style.appendChild(document.createTextNode(css));\n};\n\nvar showMessenger = function showMessenger(shouldShowDialog) {\n  if (globalDebugModeFlag) {\n    console.log(\"[react-messenger-chat-plugin] showing messenger with argument \\\"shouldShowDialog\\\": \".concat(shouldShowDialog));\n  }\n\n  try {\n    if (isMounted && (FB === null || FB === void 0 ? void 0 : FB.CustomerChat)) {\n      FB.CustomerChat.show(shouldShowDialog);\n    } else if (!isMounted) {\n      console.warn(\"Messenger could not expand messenger due to the messenger chat not beeing mounted yet.\");\n    }\n  } catch (err) {\n    throw new Error(err);\n  }\n};\n\nvar hideMessenger = function hideMessenger() {\n  if (globalDebugModeFlag) {\n    console.log(\"[react-messenger-chat-plugin] hiding messenger with argument\");\n  }\n\n  try {\n    if (isMounted && (FB === null || FB === void 0 ? void 0 : FB.CustomerChat)) {\n      FB.CustomerChat.hide();\n    } else if (!isMounted) {\n      console.warn(\"Messenger could not hide messenger due to the messenger chat not beeing mounted yet.\");\n    }\n  } catch (err) {\n    throw new Error(err);\n  }\n};\n\nvar showDialog = function showDialog() {\n  if (globalDebugModeFlag) {\n    console.log(\"[react-messenger-chat-plugin] showing dialog\");\n  }\n\n  try {\n    if (isMounted && (FB === null || FB === void 0 ? void 0 : FB.CustomerChat)) {\n      FB.CustomerChat.showDialog();\n    } else if (!isMounted) {\n      console.warn(\"Messenger could not show dialog due to the messenger chat not beeing mounted yet.\");\n    }\n  } catch (err) {\n    throw new Error(err);\n  }\n};\n\nvar hideDialog = function hideDialog() {\n  if (globalDebugModeFlag) {\n    console.log(\"[react-messenger-chat-plugin] hiding dialog\");\n  }\n\n  try {\n    if (isMounted && (FB === null || FB === void 0 ? void 0 : FB.CustomerChat)) {\n      FB.CustomerChat.hideDialog();\n    } else if (!isMounted) {\n      console.warn(\"Messenger could not hide dialog due to the messenger chat not beeing mounted yet.\");\n    }\n  } catch (err) {\n    throw new Error(err);\n  }\n};\n\nexport { MessengerChat, hideDialog, hideMessenger, setMessengerBottomSpacing, showDialog, showMessenger };","map":{"version":3,"sources":["G:/CODE/Development/Projects/Frontend/project_fronend/node_modules/react-messenger-chat-plugin/dist/index.js"],"names":["React","useEffect","isMounted","globalDebugModeFlag","MessengerChat","forwardRef","ref","pageId","language","themeColor","bottomSpacing","greetingDialogDisplay","greetingDialogDelay","loggedInGreeting","loggedOutGreeting","onMessengerMounted","onMessengerLoad","onMessengerShow","onMessengerHide","onMessengerDialogShow","onMessengerDialogHide","debugMode","version","initMessenger","console","log","chatbox","document","getElementById","setAttribute","toString","window","fbAsyncInit","undefined","css","style","createElement","head","appendChild","type","createTextNode","FB","Event","subscribe","setTimeout","setMessengerBottomSpacing","init","xfbml","d","s","id","_a","js","fjs","getElementsByTagName","src","parentNode","insertBefore","err","className","showMessenger","shouldShowDialog","CustomerChat","show","warn","Error","hideMessenger","hide","showDialog","hideDialog"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\n\r\n/* eslint-disable no-undef */\r\n// flag to identify wether or not messenger chat is mounted\r\nlet isMounted = false;\r\n// added to be able to access debug mode outside component\r\nlet globalDebugModeFlag = false;\r\nconst MessengerChat = React.forwardRef(({ pageId, language = \"en_US\", themeColor, bottomSpacing, greetingDialogDisplay, greetingDialogDelay = 0, loggedInGreeting, loggedOutGreeting, onMessengerMounted, onMessengerLoad, onMessengerShow, onMessengerHide, onMessengerDialogShow, onMessengerDialogHide, debugMode = false, version = \"v13.0\", }, ref) => {\r\n    const initMessenger = () => {\r\n        if (debugMode) {\r\n            console.log(\"[react-messenger-chat-plugin] initializing messenger plugin\");\r\n        }\r\n        try {\r\n            const chatbox = document.getElementById(\"fb-customer-chat\");\r\n            chatbox.setAttribute(\"page_id\", pageId);\r\n            chatbox.setAttribute(\"attribution\", \"biz_inbox\");\r\n            if (themeColor) {\r\n                chatbox.setAttribute(\"theme_color\", themeColor);\r\n            }\r\n            if (loggedInGreeting) {\r\n                chatbox.setAttribute(\"logged_in_greeting\", loggedInGreeting);\r\n            }\r\n            if (loggedOutGreeting) {\r\n                chatbox.setAttribute(\"logged_out_greeting\", loggedOutGreeting);\r\n            }\r\n            if (greetingDialogDisplay) {\r\n                chatbox.setAttribute(\"greeting_dialog_display\", greetingDialogDisplay);\r\n            }\r\n            if (greetingDialogDelay) {\r\n                chatbox.setAttribute(\"greeting_dialog_delay\", greetingDialogDelay.toString());\r\n            }\r\n            window.fbAsyncInit = function () {\r\n                if (bottomSpacing != undefined) {\r\n                    const css = `\r\n              .fb_reset {\r\n                visibility: hidden !important;\r\n              }\r\n            `;\r\n                    const style = document.createElement(\"style\");\r\n                    document.head.appendChild(style);\r\n                    style.type = \"text/css\";\r\n                    style.appendChild(document.createTextNode(css));\r\n                    FB.Event.subscribe(\"customerchat.load\", () => {\r\n                        setTimeout(() => setMessengerBottomSpacing(bottomSpacing), 1500);\r\n                    });\r\n                }\r\n                FB.init({\r\n                    xfbml: true,\r\n                    version: version,\r\n                });\r\n                FB.Event.subscribe(\"customerchat.load\", () => {\r\n                    // we check if not undefined, since 0 should still be a valid number\r\n                    if (onMessengerLoad)\r\n                        onMessengerLoad();\r\n                    if (bottomSpacing != undefined) {\r\n                        setTimeout(() => setMessengerBottomSpacing(bottomSpacing), 1500);\r\n                    }\r\n                });\r\n                FB.Event.subscribe(\"xfbml.render\", () => {\r\n                    if (onMessengerMounted) {\r\n                        onMessengerMounted();\r\n                    }\r\n                    isMounted = true;\r\n                });\r\n                FB.Event.subscribe(\"customerchat.show\", () => {\r\n                    if (onMessengerShow)\r\n                        onMessengerShow();\r\n                });\r\n                FB.Event.subscribe(\"customerchat.hide\", () => {\r\n                    if (onMessengerHide)\r\n                        onMessengerHide();\r\n                });\r\n                FB.Event.subscribe(\"customerchat.dialogShow\", () => {\r\n                    if (onMessengerDialogShow)\r\n                        onMessengerDialogShow();\r\n                });\r\n                FB.Event.subscribe(\"customerchat.dialogHide\", () => {\r\n                    if (onMessengerDialogHide)\r\n                        onMessengerDialogHide();\r\n                });\r\n            };\r\n            (function (d, s, id) {\r\n                var _a;\r\n                let js, \r\n                // eslint-disable-next-line prefer-const\r\n                fjs = d.getElementsByTagName(s)[0];\r\n                if (d.getElementById(id))\r\n                    return;\r\n                // eslint-disable-next-line prefer-const\r\n                js = d.createElement(s);\r\n                js.id = id;\r\n                js.src = `https://connect.facebook.net/${language}/sdk/xfbml.customerchat.js`;\r\n                (_a = fjs === null || fjs === void 0 ? void 0 : fjs.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(js, fjs);\r\n            })(document, \"script\", \"facebook-jssdk\");\r\n        }\r\n        catch (err) {\r\n            throw err;\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        try {\r\n            globalDebugModeFlag = debugMode;\r\n            initMessenger();\r\n        }\r\n        catch (err) {\r\n            console.log(err);\r\n        }\r\n    }, []);\r\n    return (React.createElement(\"div\", { ref: ref },\r\n        React.createElement(\"div\", { id: \"fb-root\" }),\r\n        React.createElement(\"div\", { id: \"fb-customer-chat\", className: \"fb-customerchat\" })));\r\n});\r\nconst setMessengerBottomSpacing = (bottomSpacing) => {\r\n    if (globalDebugModeFlag) {\r\n        console.log(`[react-messenger-chat-plugin] setting messenger bottom spacing: ${bottomSpacing}`);\r\n    }\r\n    const css = `\r\n  .fb_reset {\r\n    visibility: visible !important;\r\n  }\r\n\r\n  [data-testid=\"bubble_iframe\"] {\r\n    visibility: visible !important;\r\n    bottom: 0 !important;\r\n    transform: translateY(${-bottomSpacing}px) !important;\r\n    transition: transform 0.3s !important;\r\n  }\r\n\r\n  [data-testid='dialog_iframe'] {\r\n    bottom: ${bottomSpacing + 56}px !important;\r\n  }\r\n  `;\r\n    const style = document.createElement(\"style\");\r\n    document.head.appendChild(style);\r\n    style.type = \"text/css\";\r\n    style.appendChild(document.createTextNode(css));\r\n};\r\nconst showMessenger = (shouldShowDialog) => {\r\n    if (globalDebugModeFlag) {\r\n        console.log(`[react-messenger-chat-plugin] showing messenger with argument \"shouldShowDialog\": ${shouldShowDialog}`);\r\n    }\r\n    try {\r\n        if (isMounted && (FB === null || FB === void 0 ? void 0 : FB.CustomerChat)) {\r\n            FB.CustomerChat.show(shouldShowDialog);\r\n        }\r\n        else if (!isMounted) {\r\n            console.warn(\"Messenger could not expand messenger due to the messenger chat not beeing mounted yet.\");\r\n        }\r\n    }\r\n    catch (err) {\r\n        throw new Error(err);\r\n    }\r\n};\r\nconst hideMessenger = () => {\r\n    if (globalDebugModeFlag) {\r\n        console.log(`[react-messenger-chat-plugin] hiding messenger with argument`);\r\n    }\r\n    try {\r\n        if (isMounted && (FB === null || FB === void 0 ? void 0 : FB.CustomerChat)) {\r\n            FB.CustomerChat.hide();\r\n        }\r\n        else if (!isMounted) {\r\n            console.warn(\"Messenger could not hide messenger due to the messenger chat not beeing mounted yet.\");\r\n        }\r\n    }\r\n    catch (err) {\r\n        throw new Error(err);\r\n    }\r\n};\r\nconst showDialog = () => {\r\n    if (globalDebugModeFlag) {\r\n        console.log(`[react-messenger-chat-plugin] showing dialog`);\r\n    }\r\n    try {\r\n        if (isMounted && (FB === null || FB === void 0 ? void 0 : FB.CustomerChat)) {\r\n            FB.CustomerChat.showDialog();\r\n        }\r\n        else if (!isMounted) {\r\n            console.warn(\"Messenger could not show dialog due to the messenger chat not beeing mounted yet.\");\r\n        }\r\n    }\r\n    catch (err) {\r\n        throw new Error(err);\r\n    }\r\n};\r\nconst hideDialog = () => {\r\n    if (globalDebugModeFlag) {\r\n        console.log(`[react-messenger-chat-plugin] hiding dialog`);\r\n    }\r\n    try {\r\n        if (isMounted && (FB === null || FB === void 0 ? void 0 : FB.CustomerChat)) {\r\n            FB.CustomerChat.hideDialog();\r\n        }\r\n        else if (!isMounted) {\r\n            console.warn(\"Messenger could not hide dialog due to the messenger chat not beeing mounted yet.\");\r\n        }\r\n    }\r\n    catch (err) {\r\n        throw new Error(err);\r\n    }\r\n};\r\n\r\nexport { MessengerChat, hideDialog, hideMessenger, setMessengerBottomSpacing, showDialog, showMessenger };\r\n"]},"metadata":{},"sourceType":"module"}